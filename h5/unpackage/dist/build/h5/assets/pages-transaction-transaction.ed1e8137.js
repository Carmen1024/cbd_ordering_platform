var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,o)=>{for(var s in o||(o={}))a.call(o,s)&&r(e,s,o[s]);if(t)for(var s of t(o))l.call(o,s)&&r(e,s,o[s]);return e};import{_ as s,D as n,E as i,a as d,c,o as u,d as _,w as f,e as m,L as y,f as g,N as h,O as p,Q as D,F as k,G as w,k as b,h as M,V as O}from"./vendor.a21c6627.js";import{_ as v}from"./uni-datetime-picker.fd10993b.js";import{t as j}from"./order.84a9170d.js";import{t as C}from"./utils.1ff9889d.js";import"./uni-icons.a51ab7af.js";import"./request.bd165be5.js";import"./token.ba774510.js";var S=s(n({onShow:function(){this.getOrderData()},setup(){const e=i([]),t=i([C(new Date,"yyyy-MM-dd"),C(new Date,"yyyy-MM-dd")]),a=i({pageSize:20,pageNum:1}),l=i({}),r=i(!0);return{orderData:e,toOrderDetail:e=>{w({url:"/pages/feeBill/detail?o_s_id="+e._id})},getOrderData:()=>{const t=o(o({s_id:"10"},a.value),l.value);j(t).then((t=>{console.log(t);const l=t.data;l.length<a.value.pageSize&&(r.value=!1),e.value=[...e.value,...l],a.value.pageNum++}))},loading:r,page:a,condition:l,datetimerange:t}},methods:{timeChange(e){console.log(e),0==e.length?(delete this.condition.c_create_start_time,delete this.condition.c_create_end_time):(this.condition.c_create_start_time=e[0]+" 00:00:00",this.condition.c_create_end_time=e[1]+" 23:59:59"),this.resetOrder()},checkDays(e){let t="";const a=new Date;let l=C(a,"yyyy-MM-dd");if(0==e&&(t=C(a,"yyyy-MM-dd")),1==e){const e=C(new Date(a.getTime()-1728e5),"yyyy-MM-dd");t=e,l=e}7==e&&(t=C(new Date(a.getTime()-6048e5),"yyyy-MM-dd")),30==e&&(t=C(new Date(a.getTime()-2592e6),"yyyy-MM-dd")),this.condition={c_create_start_time:t+" 00:00:01",c_create_end_time:l+" 23:23:59"},this.resetOrder()},resetOrder(){this.page.pageNum=1,this.orderData=[],this.getOrderData()},lower:function(e){console.log(e),this.loading&&this.getOrderData()},cancel(){this.condition.o_p_code="",this.page.pageNum=1,this.orderData=[],this.getOrderData()},openPicker(){this.$refs.datetimePicker.show()}}}),[["render",function(e,t,a,l,r,o){const s=d(c("uni-datetime-picker"),v),n=b,i=M,w=O;return u(),_(n,{class:"order-container"},{default:f((()=>[m(n,{class:"condition"},{default:f((()=>[m(n,{class:"time"},{default:f((()=>[y("span",{class:"icon iconfont icon-riqi"}),m(n,{class:"timeMod"},{default:f((()=>[m(s,{ref:"datetimePicker",modelValue:e.datetimerange,"onUpdate:modelValue":t[0]||(t[0]=t=>e.datetimerange=t),type:"daterange",rangeSeparator:"至","clear-icon":"",onChange:e.timeChange},null,8,["modelValue","onChange"])])),_:1})])),_:1}),m(n,{class:"btn"},{default:f((()=>[m(i,{onClick:t[1]||(t[1]=t=>e.checkDays(0))},{default:f((()=>[g("今天")])),_:1}),m(i,{onClick:t[2]||(t[2]=t=>e.checkDays(1))},{default:f((()=>[g("昨天")])),_:1}),m(i,{onClick:t[3]||(t[3]=t=>e.checkDays(7))},{default:f((()=>[g("7天内")])),_:1}),m(i,{onClick:t[4]||(t[4]=t=>e.checkDays(30))},{default:f((()=>[g("30天内")])),_:1})])),_:1})])),_:1}),e.orderData.length>0?(u(),_(w,{key:0,class:"right scroll-Y orderData","scroll-y":"true","lower-threshold":"50",onScrolltolower:e.lower},{default:f((()=>[(u(!0),h(D,null,p(e.orderData,((e,t)=>(u(),_(n,null,{default:f((()=>[m(n,{class:"orderItem"},{default:f((()=>[m(n,{class:"msg"},{default:f((()=>[m(n,{class:"detail"},{default:f((()=>[m(n,{class:"left"},{default:f((()=>[g(k(e.tr_order_num),1)])),_:2},1024),m(n,{class:"right"},{default:f((()=>[y("span",{class:"icon iconfont icon-jine"}),g(k(e.tr_tx_amt),1)])),_:2},1024)])),_:2},1024),m(n,{class:"detail"},{default:f((()=>[m(i,null,{default:f((()=>[g("付款人："+k(e.tr_payer_name)+" "+k(e.tr_payer_acc_num),1)])),_:2},1024)])),_:2},1024),m(n,{class:"detail"},{default:f((()=>[m(i,null,{default:f((()=>[g("交易时间："+k(e.tr_tx_time),1)])),_:2},1024)])),_:2},1024),m(n,{class:"detail"},{default:f((()=>[m(i,null,{default:f((()=>[g("支付流水："+k(e.tr_bank_sn),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256)),m(n,{class:"loading"},{default:f((()=>[g(k(e.loading?"加载中":"到底喽"),1)])),_:1})])),_:1},8,["onScrolltolower"])):(u(),_(n,{key:1,class:"noData"},{default:f((()=>[m(n,null,{default:f((()=>[y("span",{class:"icon iconfont icon-chargeManagement"})])),_:1}),m(n,null,{default:f((()=>[g("您还没有账单")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-208221c4"]]);export{S as default};
