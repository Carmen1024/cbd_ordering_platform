import{_ as e,D as a,E as s,ac as l,X as t,ad as d,V as n,W as i,o,d as r,w as u,e as _,f as c,ae as m,h as p,a1 as h,k as f,af as V,ag as b,T as v}from"./vendor.6cfed29b.js";import{b as y,c as g,d as k}from"./home.1ba0f60b.js";import{g as C}from"./token.f74162db.js";import"./request.c3c876b8.js";const x=[{value:1,label:"s_a_name",tip:"请输入收件人"},{value:2,label:"s_a_phone",tip:"请输入手机号"},{value:3,label:"s_a_province",tip:"请输入省"},{value:4,label:"s_a_city",tip:"请输入市"},{value:5,label:"s_a_area",tip:"请输入区"},{value:6,label:"s_a_detail",tip:"请输入详细地址"}];var U=e(a({onLoad:function(e){this.setAddr(JSON.parse(C("addressDetail")))},setup(){const e=s({}),a=l({title:"",item:{}});return{address:e,setAddr:s=>{m({title:s.title}),a.title=s.title;const l=s.item?s.item:null;l?(a.item=l,e.value=l):(delete a.item,e.value={s_id:"10",s_a_name:"",s_a_phone:"",s_a_province:"",s_a_city:"",s_a_area:"",s_a_default:!1,s_a_detail:"",s_a_postcode:""})},layer:a}},methods:{switch1Change:function(e){this.address.s_a_default=!this.address.s_a_default},verify(){const e=this.address;return new Promise((function(a,s){for(let l of x)if(""==e[l.label]){t({title:l.tip,duration:2e3,icon:"error"}),s("error");break}a("success")}))},submit(){this.verify().then((()=>{this.layer.item?this.update():this.insert()}))},insert(){const e=this.address;e.s_a_default=this.address.s_a_default?"1":"0",e.s_id="10",y(e).then((e=>{t({title:"新增成功",duration:2e3,icon:"none"}),d()}))},update(){const e=this.address;e.s_a_default=this.address.s_a_default?"1":"0",e.s_id="10",g(e).then((e=>{t({title:"保存成功",duration:2e3,icon:"none"}),d()}))},deleteD(){const e={_id:this.address._id,c_del:1};k(e).then((e=>{t({title:"删除成功",duration:2e3,icon:"none"}),d()}))}}}),[["render",function(e,a,s,l,t,d){const m=p,y=h,g=f,k=V,C=b,x=v;return n((o(),r(g,{class:"address-container"},{default:u((()=>[_(g,{class:"address-container-item"},{default:u((()=>[_(m,null,{default:u((()=>[c("收件人")])),_:1}),_(y,{class:"uni-input",maxlength:"16",modelValue:e.address.s_a_name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.address.s_a_name=a),placeholder:"收件人姓名"},null,8,["modelValue"])])),_:1}),_(g,{class:"address-container-item"},{default:u((()=>[_(m,null,{default:u((()=>[c("手机号")])),_:1}),_(y,{class:"uni-input",maxlength:"11",type:"number",modelValue:e.address.s_a_phone,"onUpdate:modelValue":a[1]||(a[1]=a=>e.address.s_a_phone=a),placeholder:"手机号"},null,8,["modelValue"])])),_:1}),_(g,{class:"address-container-item"},{default:u((()=>[_(m,null,{default:u((()=>[c("所在地区")])),_:1}),_(y,{class:"uni-input",placeholder:"省",modelValue:e.address.s_a_province,"onUpdate:modelValue":a[2]||(a[2]=a=>e.address.s_a_province=a)},null,8,["modelValue"]),_(y,{class:"uni-input",placeholder:"市",modelValue:e.address.s_a_city,"onUpdate:modelValue":a[3]||(a[3]=a=>e.address.s_a_city=a)},null,8,["modelValue"]),_(y,{class:"uni-input",placeholder:"区/县",modelValue:e.address.s_a_area,"onUpdate:modelValue":a[4]||(a[4]=a=>e.address.s_a_area=a)},null,8,["modelValue"])])),_:1}),_(g,{class:"address-container-item",style:{height:"150rpx"}},{default:u((()=>[_(m,null,{default:u((()=>[c("详细地址")])),_:1}),_(k,{class:"uni-textarea",maxlength:"64",placeholder:"详细地址",modelValue:e.address.s_a_detail,"onUpdate:modelValue":a[5]||(a[5]=a=>e.address.s_a_detail=a)},null,8,["modelValue"])])),_:1}),_(g,{class:"address-container-item"},{default:u((()=>[_(m,null,{default:u((()=>[c("邮编")])),_:1}),_(y,{class:"uni-input",maxlength:"12",type:"number",modelValue:e.address.s_a_postcode,"onUpdate:modelValue":a[6]||(a[6]=a=>e.address.s_a_postcode=a),placeholder:"邮编"},null,8,["modelValue"])])),_:1}),_(g,{class:"address-container-item"},{default:u((()=>[_(m,null,{default:u((()=>[c("设为默认收货地址")])),_:1}),_(C,{checked:e.address.s_a_default,style:{transform:"scale(0.7)"},onChange:e.switch1Change},null,8,["checked","onChange"])])),_:1}),_(x,{class:"submit",type:"primary",onClick:e.submit},{default:u((()=>[c("确认")])),_:1},8,["onClick"]),_(x,{class:"delete",onClick:e.deleteD},{default:u((()=>[c("删除地址")])),_:1},8,["onClick"])])),_:1},512)),[[i,e.address]])}],["__scopeId","data-v-d2b07428"]]);export{U as default};
