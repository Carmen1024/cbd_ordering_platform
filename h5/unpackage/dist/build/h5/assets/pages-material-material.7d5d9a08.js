import{K as a,s as t,_ as e,o as l,d as s,w as i,e as c,P as r,$ as n,a0 as o,f as m,N as u,h as d,k as _,Y as f,M as p,D as k,W as h,R as b,V as D,i as g}from"./vendor.814d7eca.js";import{g as y,l as C}from"./index.e1c48d14.js";import{B as j}from"./backLayer.4c1c377c.js";const v=a({props:{total:{type:Number,default:()=>0}},setup:a=>({}),methods:{toCart(){t({url:"/pages/tabBar/shoppingCart/shoppingCart"})}}});var I=e(a({components:{BackLayer:j,cart:e(v,[["render",function(a,t,e,p,k,h){const b=d,D=_,g=f;return l(),s(D,{class:"cart-container"},{default:i((()=>[c(D,{class:"account"},{default:i((()=>[c(D,{class:"left",onClick:a.toCart},{default:i((()=>[r("span",{class:"icon iconfont icon-goumai"}),n(c(b,null,{default:i((()=>[m(u(a.total),1)])),_:1},512),[[o,a.total>0]])])),_:1},8,["onClick"]),c(D,{class:"right"},{default:i((()=>[c(g,{type:"primary",size:"mini",onClick:a.toCart},{default:i((()=>[m("加入购物车")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-1fc44034"]])},computed:{materialData(){const a=this.material.m_prices?this.material.m_prices[0].m_p_money:0;return this.material.m_price=(a/100).toFixed(2),this.material},back(){return{title:"物料详情",backUrl:this.material.backUrl}}},setup:a=>({material:p(y("material")||{})}),methods:{jia(a){if(a.num>=a.m_stock)return void k({title:"库存已不足",duration:2e3,icon:"none"});if(0==a.c_valid)return void k({title:"物料已失效，无法加购",duration:2e3,icon:"none"});a.num++;const t={m_id:a._id,m_c_count:1,m_c_unit:1,s_id:C().s_id};this.$emit("jiaReaction",t)}}}),[["render",function(a,t,e,n,o,f){const p=h("back-layer"),k=g,y=d,C=_,j=h("cart");return l(),b(D,null,[c(p,{back:a.back},null,8,["back"]),c(C,{class:"materialData"},{default:i((()=>[c(k,{src:a.materialData.img||"/static/logo.jpg"},null,8,["src"]),c(C,{class:"price"},{default:i((()=>[r("span",{class:"icon iconfont icon-jine"}),a.materialData.m_prices?(l(),s(y,{key:0},{default:i((()=>[m(u(a.materialData.m_price),1)])),_:1})):(l(),s(y,{key:1},{default:i((()=>[m("0.00")])),_:1}))])),_:1}),c(C,{class:"name"},{default:i((()=>[m(u(a.materialData.m_name||"物料名称"),1)])),_:1}),c(C,{class:"detail"},{default:i((()=>[c(C,{class:"detailItem"},{default:i((()=>[c(C,null,{default:i((()=>[m(u(a.materialData.m_stock||999),1)])),_:1}),c(C,null,{default:i((()=>[m("库存量")])),_:1})])),_:1}),c(C,{class:"detailItem"},{default:i((()=>[c(C,null,{default:i((()=>[m(u(a.materialData.m_package),1)])),_:1}),c(C,null,{default:i((()=>[m("包装")])),_:1})])),_:1}),c(C,{class:"detailItem"},{default:i((()=>[c(C,null,{default:i((()=>[m(u(a.materialData.classifyName),1)])),_:1}),c(C,null,{default:i((()=>[m("分类")])),_:1})])),_:1})])),_:1}),c(j,{total:a.materialData.num},null,8,["total"])])),_:1})],64)}],["__scopeId","data-v-0d647b7e"]]);export{I as default};
