var a=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,e,n)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i=(a,i)=>{for(var o in i||(i={}))e.call(i,o)&&s(a,o,i[o]);if(t)for(var o of t(i))n.call(i,o)&&s(a,o,i[o]);return a};import{_ as o,D as l,E as r,a as c,c as d,o as u,d as _,w as f,e as m,L as g,N as h,O as p,Q as y,f as b,F as D,G as v,k as w,V as T,h as k}from"./vendor.a21c6627.js";import{_ as j}from"./uni-datetime-picker.fd10993b.js";import{t as M}from"./order.be9eeb30.js";import{t as O}from"./utils.1ff9889d.js";import{s as C}from"./token.ba774510.js";import"./uni-icons.a51ab7af.js";import"./request.c2d636c4.js";const S=[{value:1,label:"今天",days:0},{value:2,label:"昨天",days:1},{value:3,label:"7天内",days:7},{value:4,label:"30天内",days:30}];var N=o(l({onShow:function(){this.getTransactionData()},setup(){const a=r([]),t=r([]),e=O(new Date,"yyyy-MM-dd"),n=r({pageSize:20,pageNum:1}),s=r({}),o=r(!0);return{transactionData:a,toTransactionDetail:a=>{C("transaction",JSON.stringify(a)),v({url:"/pages/transaction/detail"})},getTransactionData:()=>{const t=i(i({s_id:"10"},n.value),s.value);M(t).then((t=>{console.log(t);const e=t.data;e.length<n.value.pageSize&&(o.value=!1),a.value=[...a.value,...e],n.value.pageNum++}))},loading:o,page:n,condition:s,datetimerange:t,buttonOptions:S,nowTime:e}},methods:{timeChange(a){console.log(a),this.datetimerange=a,this.resetTransaction()},checkDays(a){const t=new Date;let e=this.nowTime,n=this.nowTime;if(1==a){const a=O(new Date(t.getTime()-864e5),"yyyy-MM-dd");e=a,n=a}7==a&&(e=O(new Date(t.getTime()-6048e5),"yyyy-MM-dd")),30==a&&(e=O(new Date(t.getTime()-2592e6),"yyyy-MM-dd")),this.datetimerange=[e,n],this.resetTransaction()},resetTransaction(){const a=this.datetimerange;0==a.length?(delete this.condition.c_create_start_time,delete this.condition.c_create_end_time):(this.condition.c_create_start_time=a[0]+" 00:00:00",this.condition.c_create_end_time=a[1]+" 23:59:59"),this.page.pageNum=1,this.transactionData=[],this.getTransactionData()},lower:function(a){console.log(a),this.loading&&this.getTransactionData()},cancel(){this.condition.o_p_code="",this.page.pageNum=1,this.transactionData=[],this.getTransactionData()},openPicker(){this.$refs.datetimePicker.show()}}}),[["render",function(a,t,e,n,s,i){const o=c(d("uni-datetime-picker"),j),l=w,r=k,v=T;return u(),_(l,{class:"transaction-container"},{default:f((()=>[m(l,{class:"condition"},{default:f((()=>[m(l,{class:"time"},{default:f((()=>[g("span",{class:"icon iconfont icon-riqi"}),m(l,{class:"timeMod"},{default:f((()=>[m(o,{ref:"datetimePicker",value:a.datetimerange,end:a.nowTime,type:"daterange",rangeSeparator:"至","clear-icon":"",onChange:a.timeChange},null,8,["value","end","onChange"])])),_:1})])),_:1}),m(l,{class:"btn"},{default:f((()=>[(u(!0),h(y,null,p(a.buttonOptions,((t,e)=>(u(),_(r,{onClick:e=>a.checkDays(t.days)},{default:f((()=>[b(D(t.label),1)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),a.transactionData.length>0?(u(),_(v,{key:0,class:"right scroll-Y transactionData","scroll-y":"true","lower-threshold":"50",onScrolltolower:a.lower},{default:f((()=>[(u(!0),h(y,null,p(a.transactionData,((t,e)=>(u(),_(l,{onClick:e=>a.toTransactionDetail(t)},{default:f((()=>[m(l,{class:"transactionItem"},{default:f((()=>[m(l,{class:"msg"},{default:f((()=>[m(l,{class:"detail"},{default:f((()=>[m(l,{class:"left"},{default:f((()=>[b(" 订单号："+D(t.tr_order_num),1)])),_:2},1024),m(l,{class:"right"},{default:f((()=>[g("span",{class:"icon iconfont icon-jine"}),b(D(t.tr_tx_amt),1)])),_:2},1024)])),_:2},1024),m(l,{class:"detail"},{default:f((()=>[m(r,null,{default:f((()=>[b("付款人："+D(t.tr_payer_name)+" "+D(t.tr_payer_acc_num),1)])),_:2},1024)])),_:2},1024),m(l,{class:"detail"},{default:f((()=>[m(r,null,{default:f((()=>[b("交易时间："+D(t.tr_tx_time),1)])),_:2},1024)])),_:2},1024),m(l,{class:"detail"},{default:f((()=>[m(r,null,{default:f((()=>[b("支付流水："+D(t.tr_bank_sn),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256)),m(l,{class:"loading"},{default:f((()=>[b(D(a.loading?"加载中":"到底喽"),1)])),_:1})])),_:1},8,["onScrolltolower"])):(u(),_(l,{key:1,class:"noData"},{default:f((()=>[m(l,null,{default:f((()=>[g("span",{class:"icon iconfont icon-chargeManagement"})])),_:1}),m(l,null,{default:f((()=>[b("您还没有账单")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-078a12cf"]]);export{N as default};
