import{_ as e,U as t,a1 as s,au as a,a as n,c as o,o as i,d as l,w as r,e as c,f as u,k as d,ao as g,D as m}from"./vendor.1f020a26.js";import{a as f}from"./index.1e1ef7c1.js";const h="https://unidemo.dcloud.net.cn/ajax/echo/text?name=uni-app";var p=e({data:()=>({title:"request",loading:!1,res:""}),methods:{sendRequest(e){switch(this.loading=!0,e){case"promise":this._requestPromise();break;case"await":this._requestAwait();break;default:this._request()}},_request(){t({url:h,dataType:"text",data:{noncestr:Date.now()},success:e=>{console.log("request success",e),s({title:"请求成功",icon:"success",mask:!0,duration:2e3}),this.res="请求结果 : "+JSON.stringify(e)},fail:e=>{console.log("request fail",e),a({content:e.errMsg,showCancel:!1})},complete:()=>{this.loading=!1}})},_requestPromise(){t({url:h,dataType:"text",data:{noncestr:Date.now()}}).then((e=>{console.log("request success",e),s({title:"请求成功",icon:"success",mask:!0,duration:2e3}),this.res="请求结果 : "+JSON.stringify(e),this.loading=!1})).catch((e=>{console.log("request fail",e),a({content:e.errMsg,showCancel:!1}),this.loading=!1}))},async _requestAwait(){let e,n;try{e=await t({url:h,dataType:"text",data:{noncestr:Date.now()}})}catch(o){n=o}n?(console.log("request fail",n),a({content:n.errMsg,showCancel:!1})):(console.log("request success",e),s({title:"请求成功",icon:"success",mask:!0,duration:2e3}),this.res="请求结果 : "+JSON.stringify(e)),this.loading=!1}}},[["render",function(e,t,s,a,h,p){const q=n(o("page-head"),f),w=d,y=g,_=m;return i(),l(w,null,{default:r((()=>[c(q,{title:h.title},null,8,["title"]),c(w,{class:"uni-padding-wrap uni-common-mt"},{default:r((()=>[c(w,{class:"uni-hello-text"},{default:r((()=>[u(" 请点击按钮向服务器发起请求 ")])),_:1}),c(w,{class:"uni-textarea uni-common-mt"},{default:r((()=>[c(y,{value:h.res},null,8,["value"])])),_:1}),c(w,{class:"uni-btn-v uni-common-mt"},{default:r((()=>[c(_,{type:"primary",onClick:p.sendRequest,loading:h.loading},{default:r((()=>[u("发起请求（Callback）")])),_:1},8,["onClick","loading"]),c(_,{type:"primary",onClick:t[0]||(t[0]=e=>p.sendRequest("promise")),loading:h.loading},{default:r((()=>[u("发起请求（Promise）")])),_:1},8,["loading"]),c(_,{type:"primary",onClick:t[1]||(t[1]=e=>p.sendRequest("await")),loading:h.loading},{default:r((()=>[u("发起请求（Async/Await）")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})}]]);export{p as default};
