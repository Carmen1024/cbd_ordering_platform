import{_ as s,g as e,b8 as o,as as t,Z as n,ar as a,b7 as c,b9 as l,Y as i,ba as d,bb as r,bc as g,bd as h,a as m,c as u,o as b,d as f,w as p,e as k,f as w,F as _,W as C,X as y,k as v,U as M}from"./vendor.c7c2a947.js";import{_ as I}from"./page-head.65dafd7b.js";let j=e().platform;var U=s({data:()=>({connected:!1,connecting:!1,msg:!1,roomId:""}),computed:{showMsg(){return this.connected?this.msg?"收到消息："+this.msg:"等待接收消息":"尚未连接"}},onUnload(){o(),t()},methods:{connect(){if(this.connected||this.connecting)return n({content:"正在连接或者已经连接，请勿重复连接",showCancel:!1}),!1;this.connecting=!0,a({title:"连接中..."}),c({url:"wss://echo.websocket.org",data:()=>({msg:"Hello"}),success(s){},fail(s){}}),l((s=>{this.connecting=!1,this.connected=!0,t(),i({icon:"none",title:"连接成功"}),console.log("onOpen",s)})),d((s=>{this.connecting=!1,this.connected=!1,t(),n({content:"连接失败，可能是websocket服务不可用，请稍后再试",showCancel:!1}),console.log("onError",s)})),r((s=>{this.msg=s.data,console.log("onMessage",s)})),g((s=>{this.connected=!1,this.startRecive=!1,this.msg=!1,console.log("onClose",s)}))},send(){h({data:"from "+j+" : "+parseInt(1e4*Math.random()).toString(),success(s){console.log(s)},fail(s){console.log(s)}})},close(){o()}}},[["render",function(s,e,o,t,n,a){const c=m(u("page-head"),I),l=v,i=M;return b(),f(l,null,{default:p((()=>[k(c,{title:"websocket通讯示例"}),k(l,{class:"uni-padding-wrap"},{default:p((()=>[k(l,{class:"uni-btn-v"},{default:p((()=>[k(l,{class:"websocket-msg"},{default:p((()=>[w(_(a.showMsg),1)])),_:1}),k(i,{type:"primary",onClick:a.connect},{default:p((()=>[w("连接websocket服务")])),_:1},8,["onClick"]),C(k(i,{type:"primary",onClick:a.send},{default:p((()=>[w("发送一条消息")])),_:1},8,["onClick"]),[[y,n.connected]]),k(i,{type:"primary",onClick:a.close},{default:p((()=>[w("断开websocket服务")])),_:1},8,["onClick"]),k(l,{class:"websocket-tips"},{default:p((()=>[w("发送消息后会收到一条服务器返回的消息（与发送的消息内容一致）")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-de69cbbe"]]);export{U as default};
