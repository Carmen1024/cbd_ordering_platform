var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))s.call(o,n)&&l(e,n,o[n]);return e};import{_ as n,D as i,E as r,a as c,c as d,o as _,d as u,w as f,e as m,K as p,V as g,W as h,M as b,N as y,P as j,f as k,F as v,G as w,h as D,k as O,U as C,i as S,T as P}from"./vendor.d63b4332.js";import{_ as z}from"./uni-search-bar.de984d73.js";import{_ as N}from"./uni-datetime-picker.63318c9c.js";import{o as T}from"./order.f7fc3fa6.js";import{s as I}from"./enum.6f7a1015.js";import"./uni-icons.1dd790bb.js";import"./request.f2a0712f.js";import"./token.1631d279.js";var V=n(i({onShow:function(){console.log("onShow"),this.getOrderData()},setup(){const e=r([]),a=r({pageSize:20,pageNum:1}),t=r({o_p_code:"",c_create_start_time:"",c_create_end_time:"",o_s_status:[8,9,10,11]}),s=r(!0),l=r(["2021-03-20","2021-05-10"]),n=r(!1);return{orderData:e,toOrderDetail:e=>{w({url:"/pages/tabBar/order/detail?_id="+e._id})},getOrderData:()=>{const l=o(o({s_id:"10"},a.value),t.value);T(l).then((t=>{console.log(t);const l=t.data.map((e=>{const a=I.find((a=>a.value===e.o_s_status));return e.o_s_status_desc=a?a.label:e.o_s_status,e}));l.length<a.value.pageSize&&(s.value=!1),e.value=[...e.value,...l],a.value.pageNum++}))},loading:s,page:a,datetimerange:l,showTime:n,condition:t}},methods:{lower:function(e){console.log(e),this.loading&&this.getOrderData()},timeChange(e){console.log(e),0==e.length?(delete this.condition.c_create_start_time,delete this.condition.c_create_end_time):(this.condition.c_create_start_time=e[0]+" 00:00:00",this.condition.c_create_end_time=e[1]+" 23:59:59"),this.page.pageNum=1,this.orderData=[],this.getOrderData()},search(e){console.log(e),0==e.length?delete this.condition.o_p_code:this.condition.o_p_code=e.value,this.page.pageNum=1,this.orderData=[],this.getOrderData()},openPicker(){this.$refs.datetimePicker.show()}}}),[["render",function(e,a,t,s,l,o){const n=c(d("uni-search-bar"),z),i=D,r=O,w=c(d("uni-datetime-picker"),N),T=S,I=P,V=C;return _(),u(r,{class:"order-container"},{default:f((()=>[m(r,{class:"condition"},{default:f((()=>[m(n,{class:"left",onConfirm:e.search,radius:"20",maxlength:"30",bgColor:"#fff",placeholder:"请输入订单号查询"},null,8,["onConfirm"]),m(i,{class:"right"},{default:f((()=>[p("span",{class:"icon iconfont icon-riqi",onClick:a[0]||(a[0]=a=>e.showTime=!e.showTime)})])),_:1})])),_:1}),g(m(r,{class:"timeMod"},{default:f((()=>[m(w,{ref:"datetimePicker",modelValue:e.datetimerange,"onUpdate:modelValue":a[1]||(a[1]=a=>e.datetimerange=a),type:"daterange",start:"2021-01-01",end:"2022-02-28",rangeSeparator:"至","clear-icon":"",onChange:e.timeChange},null,8,["modelValue","onChange"])])),_:1},512),[[h,e.showTime]]),e.orderData.length>0?(_(),u(V,{key:0,class:"right scroll-Y orderData","scroll-y":"true","lower-threshold":"50",onScrolltolower:e.lower},{default:f((()=>[(_(!0),b(j,null,y(e.orderData,((a,t)=>(_(),u(r,null,{default:f((()=>[m(r,{class:"orderItem",onClick:t=>e.toOrderDetail(a)},{default:f((()=>[m(r,{class:"title"},{default:f((()=>[m(i,{class:"left"},{default:f((()=>[k(v(a.o_p_code),1)])),_:2},1024),m(r,{class:"right"},{default:f((()=>[m(i,null,{default:f((()=>[k(v(a.o_s_status_desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),m(r,{class:"materialList"},{default:f((()=>[(_(!0),b(j,null,y(a.sub_order_materials,((e,a)=>g((_(),u(r,{class:"materialItem"},{default:f((()=>[m(T,{src:e.img||"/static/logo.jpg"},null,8,["src"]),m(r,{class:"detail"},{default:f((()=>[m(r,{class:"name"},{default:f((()=>[k(v(e.o_m_name||"物料名称"),1)])),_:2},1024),m(r,{class:"price"},{default:f((()=>[m(i,{class:"total"},{default:f((()=>[p("span",{class:"icon iconfont icon-jine"}),k(v(e.o_m_price),1)])),_:2},1024),m(r,{class:"numHandle"},{default:f((()=>[m(i,null,{default:f((()=>[k("x"+v(e.o_m_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[h,a<3]]))),256)),g(m(r,{class:"more"},{default:f((()=>[k(" 查看更多 "),p("span",{class:"icon iconfont icon-right"})])),_:2},1536),[[h,a.sub_order_materials.length>3]])])),_:2},1024),1==a.o_s_status?(_(),u(r,{key:0,class:"msg"},{default:f((()=>[m(r,{class:"detail"},{default:f((()=>[m(r,{class:"left"},{default:f((()=>[m(i,null,{default:f((()=>[k(v(a.c_create_time),1)])),_:2},1024)])),_:2},1024),m(r,{class:"right"},{default:f((()=>[m(i,null,{default:f((()=>[k("共计："+v(a.s_o_m_num)+"件,",1)])),_:2},1024),m(i,{class:"price"},{default:f((()=>[k("需付款"),p("span",{class:"icon iconfont icon-jine"}),k(v(a.o_p_real_pay_money||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),m(r,{class:"numHandle"},{default:f((()=>[m(I,{class:"uni-button",size:"mini"},{default:f((()=>[k("取消订单")])),_:1}),m(I,{type:"primary",size:"mini",onClick:e.submit},{default:f((()=>[k("去付款")])),_:1},8,["onClick"])])),_:1})])),_:2},1024)):(_(),u(r,{key:1,class:"msg"},{default:f((()=>[m(r,{class:"detail"},{default:f((()=>[m(r,{class:"left"},{default:f((()=>[m(i,null,{default:f((()=>[k(v(a.c_create_time),1)])),_:2},1024)])),_:2},1024),m(r,{class:"right"},{default:f((()=>[m(i,null,{default:f((()=>[k("共计："+v(a.s_o_m_num)+"件,",1)])),_:2},1024),m(i,{class:"price"},{default:f((()=>[k("实付款："),p("span",{class:"icon iconfont icon-jine"}),k(v(a.o_p_real_pay_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),m(r,{class:"numHandle"},{default:f((()=>[m(I,{size:"mini"},{default:f((()=>[k("再次购买")])),_:1})])),_:1})])),_:2},1024))])),_:2},1032,["onClick"])])),_:2},1024)))),256)),m(r,{class:"loading"},{default:f((()=>[k(v(e.loading?"加载中":"到底喽"),1)])),_:1})])),_:1},8,["onScrolltolower"])):(_(),u(r,{key:1,class:"noData"},{default:f((()=>[m(r,null,{default:f((()=>[p("span",{class:"icon iconfont icon-chargeManagement"})])),_:1}),m(r,null,{default:f((()=>[k("您还没有相关的订单")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-d4d0d28a"]]);export{V as default};
