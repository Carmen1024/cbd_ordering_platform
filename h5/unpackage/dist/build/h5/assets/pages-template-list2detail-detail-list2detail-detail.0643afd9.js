import{_ as e,aN as t,ay as a,aC as n,a4 as r,U as s,o as i,d as l,w as o,e as c,f as d,t as h,i as u,k as p,h as f,ad as m}from"./vendor.762bb174.js";var b=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,g=/^<\/([-A-Za-z0-9_]+)[^>]*>/,v=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,x=k("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),_=k("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),y=k("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),w=k("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),O=k("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),S=k("script,style");function k(e){for(var t={},a=e.split(","),n=0;n<a.length;n++)t[a[n]]=!0;return t}function A(e){e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}(e);var t=[],a={node:"root",children:[]};return function(e,t){var a,n,r,s=[],i=e;for(s.last=function(){return this[this.length-1]};e;){if(n=!0,s.last()&&S[s.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+s.last()+"[^>]*>"),(function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a),""})),c("",s.last());else if(0==e.indexOf("\x3c!--")?(a=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),n=!1):0==e.indexOf("</")?(r=e.match(g))&&(e=e.substring(r[0].length),r[0].replace(g,c),n=!1):0==e.indexOf("<")&&(r=e.match(b))&&(e=e.substring(r[0].length),r[0].replace(b,o),n=!1),n){var l=(a=e.indexOf("<"))<0?e:e.substring(0,a);e=a<0?"":e.substring(a),t.chars&&t.chars(l)}if(e==i)throw"Parse Error: "+e;i=e}function o(e,a,n,r){if(a=a.toLowerCase(),_[a])for(;s.last()&&y[s.last()];)c("",s.last());if(w[a]&&s.last()==a&&c("",a),(r=x[a]||!!r)||s.push(a),t.start){var i=[];n.replace(v,(function(e,t){var a=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:O[t]?t:"";i.push({name:t,value:a,escaped:a.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(a,i,r)}}function c(e,a){if(a)for(n=s.length-1;n>=0&&s[n]!=a;n--);else var n=0;if(n>=0){for(var r=s.length-1;r>=n;r--)t.end&&t.end(s[r]);s.length=n}}c()}(e,{start:function(e,n,r){var s={name:e};if(0!==n.length&&(s.attrs=function(e){return e.reduce((function(e,t){var a=t.value,n=t.name;return e[n]?e[n]=e[n]+" "+a:e[n]=a,e}),{})}(n)),r){var i=t[0]||a;i.children||(i.children=[]),i.children.push(s)}else t.unshift(s)},end:function(e){var n=t.shift();if(n.name!==e&&console.error("invalid state: mismatch end tag"),0===t.length)a.children.push(n);else{var r=t[0];r.children||(r.children=[]),r.children.push(n)}},chars:function(e){var n={type:"text",text:e};if(0===t.length)a.children.push(n);else{var r=t[0];r.children||(r.children=[]),r.children.push(n)}},comment:function(e){var a={node:"comment",text:e},n=t[0];n.children||(n.children=[]),n.children.push(a)}}),a.children}const N="/pages/template/list2detail-detail/list2detail-detail";var z=e({data:()=>({title:"",banner:{},htmlNodes:[]}),onLoad(e){const a=e.detailDate||e.payload;try{this.banner=JSON.parse(decodeURIComponent(a))}catch(n){this.banner=JSON.parse(a)}t({title:this.banner.title}),this.getDetail()},onShareAppMessage(){return{title:this.banner.title,path:N+"?detailDate="+JSON.stringify(this.banner)}},onNavigationBarButtonTap(e){0===e.index&&a({service:"share",success:e=>{if(e.provider&&e.provider.length&&~e.provider.indexOf("weixin")){const t=function(e){let t=[];for(let a=0,n=e.length;a<n;a++)"weixin"===e[a]&&(t.push({text:"分享到微信好友",id:"weixin",sort:0}),t.push({text:"分享到微信朋友圈",id:"weixin",sort:1}));return t.sort((function(e,t){return e.sort-t.sort})),t}(e.provider);n({itemList:t.map((e=>e.text)),success:e=>{const t=e.tapIndex;uni.share({provider:"weixin",type:0,title:this.banner.title,scene:0===t?"WXSceneSession":"WXSenceTimeline",href:"https://uniapp.dcloud.io/h5"+N+"?detailDate="+JSON.stringify(this.banner),imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b6304f00-5168-11eb-bd01-97bc1429a9ff.png"})}})}else r({title:"未检测到可用的微信分享服务"})},fail:e=>{r({title:"获取分享服务失败"})}})},methods:{getDetail(){s({url:"https://unidemo.dcloud.net.cn/api/news/36kr/"+this.banner.post_id,success:e=>{if(200==e.statusCode){var t=e.data.content.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"');this.htmlNodes=A(t)}},fail:()=>{console.log("fail")}})}}},[["render",function(e,t,a,n,r,s){const b=u,g=p,v=f,x=m;return i(),l(g,null,{default:o((()=>[c(g,{class:"banner"},{default:o((()=>[c(b,{class:"banner-img",src:r.banner.cover},null,8,["src"]),c(g,{class:"banner-title"},{default:o((()=>[d(h(r.banner.title),1)])),_:1})])),_:1}),c(g,{class:"article-meta"},{default:o((()=>[c(v,{class:"article-author"},{default:o((()=>[d(h(r.banner.author_name),1)])),_:1}),c(v,{class:"article-text"},{default:o((()=>[d("发表于")])),_:1}),c(v,{class:"article-time"},{default:o((()=>[d(h(r.banner.published_at),1)])),_:1})])),_:1}),c(g,{class:"article-content"},{default:o((()=>[c(x,{nodes:r.htmlNodes},null,8,["nodes"])])),_:1})])),_:1})}],["__scopeId","data-v-1deb1d14"]]);export{z as default};
