var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(s,t,n)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,i=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&o(e,t,s[t]);if(n)for(var t of n(s))a.call(s,t)&&o(e,t,s[t]);return e};import{_ as l,ah as f,aj as u,I as c,Y as d,a as h,c as p,o as g,d as I,w as m,e as b,f as U,R as v,M as y,F as _,P as k,h as P,k as O,i as j,T as w}from"./vendor.6cfed29b.js";import{_ as L}from"./page-head.8cd8e2f7.js";var x,N;var C=l({data:()=>({title:"getUserInfo",hasUserInfo:!1,userInfo:{},btnLoading:!1}),computed:i({},f(["loginProvider","isUniverifyLogin"])),methods:(x=i({},u(["getPhoneNumber"])),N={getUserInfo(){if(this.btnLoading=!0,this.isUniverifyLogin)this.getPhoneNumber(c("univerifyInfo")).then((e=>{this.hasUserInfo=!0,this.userInfo={phoneNumber:e}})).catch((e=>{console.error("getUserInfo fail:",e),this.hasUserInfo=!1})).finally((()=>{this.btnLoading=!1}));else{if("apple"===this.loginProvider){const e=c("apple_nickname");if(e)return this.hasUserInfo=!0,this.userInfo={nickName:e},void(this.btnLoading=!1)}uni.getUserInfo({provider:this.loginProvider,success:e=>{this.hasUserInfo=!0,this.userInfo=e.userInfo},fail:e=>{console.log("getUserInfo fail",e);let s=e.errMsg;~s.indexOf("uni.login")&&(s="请在登录页面完成登录操作"),uni.getSetting({success:e=>{let t=e.authSetting["scope.userInfo"];d(t?{title:"获取用户信息失败",content:"错误原因"+s,showCancel:!1}:{title:"授权失败",content:"Hello uni-app需要获取您的用户信息，请在设置界面打开相关权限",success:e=>{e.confirm&&uni.openSetting()}})}})},complete:()=>{this.btnLoading=!1}})}},mpGetUserInfo(e){console.log("mpGetUserInfo",e),"getUserInfo:ok"===e.detail.errMsg?(this.hasUserInfo=!0,this.userInfo=e.detail.userInfo):d({title:"获取用户信息失败",content:"错误原因"+e.detail.errMsg,showCancel:!1})},clear(){this.hasUserInfo=!1,this.userInfo={}}},s(x,t(N)))},[["render",function(e,s,t,n,r,a){const o=h(p("page-head"),L),i=P,l=O,f=j,u=w;return g(),I(l,null,{default:m((()=>[b(o,{title:r.title},null,8,["title"]),b(l,{class:"uni-padding-wrap"},{default:m((()=>[b(l,{style:{background:"#FFF",padding:"40rpx"}},{default:m((()=>[!1===r.hasUserInfo?(g(),I(l,{key:0,class:"uni-hello-text uni-center"},{default:m((()=>[b(i,null,{default:m((()=>[U("请点击下方按钮获取用户头像及昵称或手机号")])),_:1})])),_:1})):v("",!0),!0===r.hasUserInfo?(g(),y(k,{key:1},[b(l,{class:"uni-h4 uni-center uni-common-mt"},{default:m((()=>[U(_(r.userInfo.nickName||r.userInfo.email||r.userInfo.phoneNumber),1)])),_:1}),r.userInfo.avatarUrl?(g(),I(l,{key:0,style:{padding:"30rpx 0","text-align":"center"}},{default:m((()=>[b(f,{class:"userinfo-avatar",src:r.userInfo.avatarUrl},null,8,["src"])])),_:1})):v("",!0)],64)):v("",!0)])),_:1}),b(l,{class:"uni-btn-v"},{default:m((()=>[b(u,{onClick:a.clear},{default:m((()=>[U("清空")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-0fa24921"]]);export{C as default};
