import{D as a,_ as s,W as t,X as e,o as i,d as n,w as c,e as l,f as o,F as _,L as d,N as u,O as m,Q as r,h as f,k as p,i as h,Y as y,Z as j,T as g}from"./vendor.a21c6627.js";import{e as k,f as v}from"./subscribe.c8a28c23.js";var C=s(a({props:{reactionMaterials:{type:Object,default:()=>({show:!1,materials:[]})}},setup:a=>({}),methods:{jia(a){console.log(a);const s={m_id:a.r_m_id,m_c_count:a.r_m_count,m_c_unit:1,s_id:"10"};this.$emit("jiaReaction",s)}}}),[["render",function(a,s,y,j,g,k){const v=f,C=p,M=h;return t((i(),n(C,{class:"reaction-container"},{default:c((()=>[l(C,{class:"title"},{default:c((()=>[l(v,null,{default:c((()=>[o("关联物料("+_(a.reactionMaterials.materials.length)+")",1)])),_:1}),d("span",{class:"right icon iconfont icon-close",onClick:s[0]||(s[0]=s=>a.reactionMaterials.show=!1)})])),_:1}),l(C,{class:"commodityList"},{default:c((()=>[(i(!0),u(r,null,m(a.reactionMaterials.materials,((s,t)=>(i(),n(C,{class:"commodityItem"},{default:c((()=>[l(M,{src:s.img||"/static/logo.jpg"},null,8,["src"]),l(C,{class:"detail"},{default:c((()=>[l(C,{class:"name"},{default:c((()=>[o(_(s.m_name||"物料名称"),1)])),_:2},1024),l(C,{class:"unit"},{default:c((()=>[l(v,{class:"left"},{default:c((()=>[o("500g*30袋/箱")])),_:1}),l(v,{class:"right"},{default:c((()=>[d("span",{class:"icon iconfont icon-jine"}),s.m_prices?(i(),n(v,{key:0},{default:c((()=>[o(_(s.m_prices[0].m_p_money)+"/箱 ",1)])),_:2},1024)):(i(),n(v,{key:1},{default:c((()=>[o("100/箱")])),_:1}))])),_:2},1024)])),_:2},1024),l(C,{class:"price"},{default:c((()=>[l(v,{class:"left total"},{default:c((()=>[o(" 关联件数："+_(s.r_m_count),1)])),_:2},1024),l(C,{class:"right numHandle",onClick:t=>a.jia(s)},{default:c((()=>[d("span",{class:"icon iconfont icon-goumai"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1},512)),[[e,a.reactionMaterials.show]])}],["__scopeId","data-v-19320ed0"]]);var M=s(a({props:{materialData:{type:Array,default:()=>[]}},setup:a=>({}),methods:{jia(a){if(a.num>=a.m_stock)return void y({title:"库存已不足",duration:2e3,icon:"none"});if(0==a.c_valid)return void y({title:"物料已失效，无法加购",duration:2e3,icon:"none"});a.num++;const s={m_id:a._id,m_c_count:1,m_c_unit:1,s_id:"10"};this.$emit("jiaReaction",s)},jian(a){console.log("减少",a);const s=this;a.num<=1?j({content:"是否确认删除该物料",showCancel:!0,success:function(t){t.confirm&&(a.num--,s.deleteByM(a))}}):(a.num--,s.reduce(a))},reduce(a){const s={m_id:a._id,m_c_count:-1,m_c_unit:1,s_id:"10"};this.$emit("jiaReaction",s)},deleteByM(a){const s=this,t={s_id:"10",m_id:a._id};k(t).then((a=>{s.$emit("jianReaction")}))},deleteByIds(a){const s=this;v({ids:a}).then((a=>{y({title:"删除成功",duration:2e3,icon:"none"}),s.$emit("jianReaction")}))}}}),[["render",function(a,s,y,j,k,v){const C=p,M=h,I=f;return i(!0),u(r,null,m(a.materialData,((s,u)=>(i(),n(C,{class:"materialItem"},{default:c((()=>[s.isFirst?(i(),n(C,{key:0,class:"classify",id:`classify_${s.classifyId}`},{default:c((()=>[o(_(s.classifyName),1)])),_:2},1032,["id"])):g("",!0),l(C,{class:"material"},{default:c((()=>[l(M,{src:s.img||"/static/logo.jpg"},null,8,["src"]),l(C,{class:"detail"},{default:c((()=>[l(C,{class:"name"},{default:c((()=>[o(_(s.m_name||"物料名称"),1)])),_:2},1024),l(C,{class:"unit"},{default:c((()=>[l(I,{class:"left"},{default:c((()=>[o(_(s.m_package),1)])),_:2},1024),l(I,{class:"right"},{default:c((()=>[d("span",{class:"icon iconfont icon-jine"}),s.m_prices?(i(),n(I,{key:0},{default:c((()=>[o(_(s.m_prices[0].m_p_money)+"/箱 ",1)])),_:2},1024)):(i(),n(I,{key:1},{default:c((()=>[o("0/箱")])),_:1}))])),_:2},1024)])),_:2},1024),l(C,{class:"price"},{default:c((()=>[l(C,{class:"left total"},{default:c((()=>[o(" 库存量："+_(s.m_stock||999),1)])),_:2},1024),l(C,{class:"right"},{default:c((()=>[t(d("span",{class:"icon iconfont icon-jian",onClick:t=>a.jian(s)},null,8,["onClick"]),[[e,s.num>0]]),l(C,{class:"numHandle",onClick:t=>a.jia(s)},{default:c((()=>[d("span",{class:"icon iconfont icon-goumai"}),s.num&&s.num>0?(i(),n(I,{key:0},{default:c((()=>[o(_(s.num),1)])),_:2},1024)):g("",!0)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256)}],["__scopeId","data-v-4a41bc97"]]);export{M as m,C as r};
