import{_ as a,K as e,M as t,af as s,D as l,W as _,o as i,R as c,e as o,w as d,f as n,N as u,V as m,T as r,$ as f,a0 as p,h,k as v,Y as g,d as k,i as b,a5 as y}from"./vendor.e8d4713a.js";import{g as D,h as I}from"./order.e5ea5964.js";import{B as L}from"./backLayer.4ef582ec.js";import"./index.d1efd29a.js";var j=a(e({components:{BackLayer:L},onLoad:function(a){console.log(a.o_s_id),this.order=a,this.back.backUrl="/pages/receive/list?o_s_id="+a.o_s_id,this.getReceiveList()},setup(){const a=t({}),e=s({title:"发货单详情",backUrl:"/pages/receive/list?o_s_id="}),l=t({}),_=t(0),i=t(0);return{getReceiveList:()=>{const{o_s_id:e,_id:t,i_code:s,o_s_code:c}=a.value;I({o_s_id:e,_id:t,i_code:s,o_s_code:c}).then((a=>{_.value=0,a.data.i_materials_list=a.data.i_materials_list.map((a=>(a.m_c_count=a.m_count,_.value+=parseInt(a.m_count),a))),l.value=a.data,i.value=_.value}))},detailData:l,order:a,m_c_count:i,m_count:_,back:e}},methods:{reveice(){const{o_s_id:a,_id:e,o_s_code:t}=this.detailData,s={o_s_id:a,_id:e,o_s_code:t,i_materials_list:this.detailData.i_materials_list.map((a=>{const{m_name:e,m_c_count:t,m_unit:s,m_id:l}=a;return{m_name:e,m_count:t,m_unit:s,m_id:l}}))};console.log(s),D(s).then((a=>{this.getReceiveList(),l({title:"已成功验收",duration:2e3,icon:"none"})}))},dataChange(a){let e="";if(isNaN(parseInt(a.m_c_count))?e="请填入数字":a.m_c_count.match(/^\d+$/)?parseInt(a.m_c_count)>parseInt(a.m_count)&&(e="不能大于实际发货件数"):e="数量必须为大于等于0的整数",e)return a.m_c_count=a.m_count,void l({title:e,duration:2e3,icon:"none"});let t=0;this.detailData.i_materials_list.map((a=>{t+=parseInt(a.m_c_count)})),this.m_c_count=t}}}),[["render",function(a,e,t,s,l,D){const I=_("back-layer"),L=h,j=v,V=b,B=y,C=g;return i(),c(m,null,[o(I,{back:a.back},null,8,["back"]),o(j,{class:"shopping-container"},{default:d((()=>[o(j,{class:"commodityMod"},{default:d((()=>[o(j,{class:"other"},{default:d((()=>[o(j,{class:"other-item"},{default:d((()=>[o(L,{class:"left"},{default:d((()=>[n("交货单")])),_:1}),o(j,{class:"right"},{default:d((()=>[n(u(a.detailData.i_code),1)])),_:1})])),_:1}),o(j,{class:"other-item"},{default:d((()=>[o(L,{class:"left"},{default:d((()=>[n("订单号")])),_:1}),o(j,{class:"right"},{default:d((()=>[n(u(a.detailData.o_s_code),1)])),_:1})])),_:1})])),_:1}),(i(!0),c(m,null,r(a.detailData.i_materials_list,((e,t)=>(i(),k(j,{class:"commodityItem"},{default:d((()=>[o(V,{src:e.img||"/static/logo.jpg"},null,8,["src"]),o(j,{class:"detail"},{default:d((()=>[o(j,{class:"name"},{default:d((()=>[n(u(e.m_name||"物料名称"),1)])),_:2},1024),o(j,{class:"unit"},{default:d((()=>[o(L,{class:"left"},{default:d((()=>[n(u(e.m_package||"500g*30袋/箱"),1)])),_:2},1024),o(L,{class:"right"},{default:d((()=>[n("批次号:"+u(e.i_m_batch_no),1)])),_:2},1024)])),_:2},1024),o(j,{class:"price"},{default:d((()=>[o(L,{class:"total"},{default:d((()=>[n(" 发货:"+u(e.m_count)+"件 ",1)])),_:2},1024),o(j,{class:"numHandle"},{default:d((()=>[n(" 签收: "),1==a.detailData.received?(i(),k(L,{key:0},{default:d((()=>[n(u(e.received_m_count||0),1)])),_:2},1024)):(i(),k(B,{key:1,class:"uni-input",type:"number",modelValue:e.m_c_count,"onUpdate:modelValue":a=>e.m_c_count=a,onBlur:t=>a.dataChange(e),"auto-blur":"true"},null,8,["modelValue","onUpdate:modelValue","onBlur"]))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1}),o(j,{class:"account"},{default:d((()=>[o(L,null,{default:d((()=>[n("订货数量"+u(a.m_count)+"箱，实收数量"+u(a.m_c_count)+"箱",1)])),_:1}),f(o(C,{type:"primary",size:"mini",onClick:a.reveice},{default:d((()=>[n(" 确认验收 ")])),_:1},8,["onClick"]),[[p,1!=a.detailData.received]])])),_:1})])),_:1})],64)}],["__scopeId","data-v-240b4e69"]]);export{j as default};
