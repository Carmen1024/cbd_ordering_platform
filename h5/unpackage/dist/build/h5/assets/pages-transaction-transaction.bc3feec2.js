var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i=(a,i)=>{for(var o in i||(i={}))t.call(i,o)&&s(a,o,i[o]);if(e)for(var o of e(i))n.call(i,o)&&s(a,o,i[o]);return a};import{_ as o,K as l,L as r,af as c,M as d,W as u,a as _,c as m,o as f,R as g,e as h,w as p,d as y,V as b,T as k,f as v,N as w,P as D,C as T,k as j,Z as M,h as O}from"./vendor.e8d4713a.js";import{_ as S}from"./uni-datetime-picker.0fe202a2.js";import{t as C}from"./order.e5ea5964.js";import{l as P,t as N,s as x}from"./index.d1efd29a.js";import{B}from"./backLayer.4ef582ec.js";import"./uni-icons.86ca88fe.js";const I=[{value:1,label:"今天",days:0},{value:2,label:"昨天",days:1},{value:3,label:"7天内",days:7},{value:4,label:"30天内",days:30}];var L=o(l({components:{BackLayer:B},onShow:function(){this.getTransactionData()},setup(){r();const a=c({title:"账单",backUrl:"/pages/tabBar/home/home"}),{s_id:e,r_g_id:t}=P(),n=d([]),s=d([]),o=N(new Date,"yyyy-MM-dd"),l=d({pageSize:20,pageNum:1}),u=d({}),_=d(!0);return{transactionData:n,toTransactionDetail:a=>{x("transaction",JSON.stringify(a)),T({url:"/pages/transaction/detail"})},getTransactionData:()=>{const a=i(i({s_id:e},l.value),u.value);C(a).then((a=>{console.log(a);const e=a.data;e.length<l.value.pageSize&&(_.value=!1),n.value=[...n.value,...e],l.value.pageNum++}))},loading:_,page:l,condition:u,datetimerange:s,buttonOptions:I,nowTime:o,back:a}},methods:{timeChange(a){console.log(a),this.datetimerange=a,this.resetTransaction()},checkDays(a){const e=new Date;let t=this.nowTime,n=this.nowTime;if(1==a){const a=N(new Date(e.getTime()-864e5),"yyyy-MM-dd");t=a,n=a}7==a&&(t=N(new Date(e.getTime()-6048e5),"yyyy-MM-dd")),30==a&&(t=N(new Date(e.getTime()-2592e6),"yyyy-MM-dd")),this.datetimerange=[t,n],this.resetTransaction()},resetTransaction(){const a=this.datetimerange;0==a.length?(delete this.condition.c_create_start_time,delete this.condition.c_create_end_time):(this.condition.c_create_start_time=a[0]+" 00:00:00",this.condition.c_create_end_time=a[1]+" 23:59:59"),this.page.pageNum=1,this.transactionData=[],this.getTransactionData()},lower:function(a){console.log(a),this.loading&&this.getTransactionData()},cancel(){this.condition.o_p_code="",this.page.pageNum=1,this.transactionData=[],this.getTransactionData()},openPicker(){this.$refs.datetimePicker.show()}}}),[["render",function(a,e,t,n,s,i){const o=u("back-layer"),l=_(m("uni-datetime-picker"),S),r=j,c=O,d=M;return f(),g(b,null,[h(o,{back:a.back},null,8,["back"]),h(r,{class:"transaction-container"},{default:p((()=>[h(r,{class:"condition"},{default:p((()=>[h(r,{class:"time"},{default:p((()=>[h(r,{class:"timeMod"},{default:p((()=>[h(l,{ref:"datetimePicker",value:a.datetimerange,end:a.nowTime,type:"daterange",rangeSeparator:"至","clear-icon":"",onChange:a.timeChange},null,8,["value","end","onChange"])])),_:1})])),_:1})])),_:1}),a.transactionData.length>0?(f(),y(d,{key:0,class:"right scroll-Y transactionData","scroll-y":"true","lower-threshold":"50",onScrolltolower:a.lower},{default:p((()=>[(f(!0),g(b,null,k(a.transactionData,((e,t)=>(f(),y(r,{onClick:t=>a.toTransactionDetail(e)},{default:p((()=>[h(r,{class:"transactionItem"},{default:p((()=>[h(r,{class:"msg"},{default:p((()=>[h(r,{class:"detail"},{default:p((()=>[h(r,{class:"left"},{default:p((()=>[v(" 订单号："+w(e.tr_order_num),1)])),_:2},1024),h(r,{class:"right"},{default:p((()=>[D("span",{class:"icon iconfont icon-jine"}),v(w((e.tr_tx_amt/100).toFixed(2)||0),1)])),_:2},1024)])),_:2},1024),h(r,{class:"detail"},{default:p((()=>[h(c,null,{default:p((()=>[v("付款人："+w(e.tr_payer_name)+" "+w(e.tr_payer_acc_num),1)])),_:2},1024)])),_:2},1024),h(r,{class:"detail"},{default:p((()=>[h(c,null,{default:p((()=>[v("交易时间："+w(e.tr_tx_time),1)])),_:2},1024)])),_:2},1024),h(r,{class:"detail"},{default:p((()=>[h(c,null,{default:p((()=>[v("支付流水："+w(e.tr_bank_sn),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256)),h(r,{class:"loading"},{default:p((()=>[v(w(a.loading?"加载中":"到底喽"),1)])),_:1})])),_:1},8,["onScrolltolower"])):(f(),y(r,{key:1,class:"noData"},{default:p((()=>[h(r,null,{default:p((()=>[D("span",{class:"icon iconfont icon-chargeManagement"})])),_:1}),h(r,null,{default:p((()=>[v("您还没有账单")])),_:1})])),_:1}))])),_:1})],64)}],["__scopeId","data-v-212f8553"]]);export{L as default};
