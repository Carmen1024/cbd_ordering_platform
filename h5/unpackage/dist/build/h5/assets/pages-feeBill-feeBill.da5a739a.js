var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(a,o)=>{for(var r in o||(o={}))t.call(o,r)&&l(a,r,o[r]);if(e)for(var r of e(o))s.call(o,r)&&l(a,r,o[r]);return a};import{_ as r,K as n,ae as c,M as i,W as d,o as u,R as _,e as f,w as p,V as g,T as b,d as h,f as m,N as k,P as v,C as O,k as y,Z as D,U as j,h as w}from"./vendor.814d7eca.js";import{d as x}from"./order.6e4112aa.js";import{t as B,s as I}from"./enum.32150c18.js";import{O as P,a as S}from"./oBill.bc3317e3.js";import{l as N}from"./index.e1c48d14.js";import{B as T}from"./backLayer.4c1c377c.js";import"./payButton.f6224ea8.js";var C=r(n({components:{OButton:P,OBill:S,BackLayer:T},onLoad:function(a){console.log("onLoad"),console.log(a.tabIndex);const e=B.find((e=>e.value==a.tabIndex));e&&this.setTab(e)},onShow:function(){console.log("onShow"),this.resetPage()},setup(){const a=c({title:"费用单",backUrl:"/pages/tabBar/dashboard/dashboard"}),{s_id:e,r_g_id:t}=N(),s=i([]),l=i({pageSize:20,pageNum:1}),r=i({o_s_status:0}),n=i(!0),d=i(1);return{orderData:s,toOrderDetail:a=>{O({url:"/pages/feeBill/detail?o_s_id="+a._id})},getOrderData:()=>{const a=o(o({s_id:e},l.value),r.value);x(a).then((a=>{console.log(a);const e=a.data.map((a=>{const e=I.find((e=>e.value===a.o_s_status));return a.o_s_status_desc=e?e.label:a.o_s_status,a}));e.length<l.value.pageSize&&(n.value=!1),s.value=[...s.value,...e],l.value.pageNum++}))},loading:n,tabOptions:B,tabIndex:d,page:l,condition:r,back:a}},methods:{lower:function(a){console.log(a),this.loading&&this.getOrderData()},checkTab(a){this.setTab(a),this.getOrderData()},setTab(a){this.tabIndex=a.value,this.condition.o_s_status=a.status,this.page.pageNum=1,this.orderData=[]},cancel(){this.condition.o_p_code="",this.page.pageNum=1,this.orderData=[],this.getOrderData()},openPicker(){this.$refs.datetimePicker.show()},resetPage(){this.s_id=N().s_id,this.page.pageNum=1,this.orderData=[],this.getOrderData()}}}),[["render",function(a,e,t,s,l,o){const r=d("back-layer"),n=w,c=y,i=d("o-bill"),O=d("o-button"),x=D;return u(),_(g,null,[f(r,{back:a.back},null,8,["back"]),f(c,{class:"order-container"},{default:p((()=>[f(c,{class:"tab"},{default:p((()=>[(u(!0),_(g,null,b(a.tabOptions,(e=>(u(),h(n,{onClick:t=>a.checkTab(e),class:j(a.tabIndex==e.value&&"check")},{default:p((()=>[m(k(e.label),1)])),_:2},1032,["onClick","class"])))),256))])),_:1}),a.orderData.length>0?(u(),h(x,{key:0,class:"right scroll-Y orderData","scroll-y":"true","lower-threshold":"50",onScrolltolower:a.lower},{default:p((()=>[(u(!0),_(g,null,b(a.orderData,((e,t)=>(u(),h(c,null,{default:p((()=>[f(c,{class:"orderItem",onClick:t=>a.toOrderDetail(e)},{default:p((()=>[f(c,{class:"title"},{default:p((()=>[f(n,{class:"left"},{default:p((()=>[m("单号："+k(e.o_p_code),1)])),_:2},1024),f(c,{class:"right"},{default:p((()=>[f(n,null,{default:p((()=>[m(k(e.o_s_status_desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(i,{bills:e.cost_detail},null,8,["bills"]),f(c,{class:"msg"},{default:p((()=>[f(c,{class:"detail"},{default:p((()=>[f(c,{class:"left"},{default:p((()=>[f(n,null,{default:p((()=>[m(k(e.c_create_time),1)])),_:2},1024)])),_:2},1024),f(c,{class:"right"},{default:p((()=>[f(n,{class:"price"},{default:p((()=>[m("共计："),v("span",{class:"icon iconfont icon-jine"}),m(k((e.o_p_real_pay_money/100).toFixed(2)||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(O,{order:e},null,8,["order"])])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),256)),f(c,{class:"loading"},{default:p((()=>[m(k(a.loading?"加载中":"到底喽"),1)])),_:1})])),_:1},8,["onScrolltolower"])):(u(),h(c,{key:1,class:"noData"},{default:p((()=>[f(c,null,{default:p((()=>[v("span",{class:"icon iconfont icon-chargeManagement"})])),_:1}),f(c,null,{default:p((()=>[m("您还没有相关的收费单")])),_:1})])),_:1}))])),_:1})],64)}],["__scopeId","data-v-125568c6"]]);export{C as default};
