import{_ as a,D as t,E as s,o as e,d as o,w as n,e as l,K as i,f as c,F as r,M as d,N as u,P as f,R as _,X as m,Z as p,s as g,k as h,h as I,T as v,i as j}from"./vendor.6cfed29b.js";import{a as b,c as y}from"./order.a9b22a3c.js";import"./request.c3c876b8.js";import"./token.f74162db.js";var L=a(t({onLoad(a){const t=this.getOpenerEventChannel(),s=this;console.log("又来了"),t.on("acceptDataFromOpenerPage",(function(a){console.log(a),s.cartMaterialList=a.data.checkList,console.log(s.cartMaterialList),s.getOrderInf()}))},onShow(){},setup(){const a=s({}),t=s({}),e=s({});return{cartMaterialList:a,getOrderInf:()=>{setTimeout((()=>{m({icon:"loading",title:"正在加载中",duration:1e4})}),100),console.log(a.value),e.value=a.value.map((a=>({m_id:a.m_id,count:a.m_c_count,unit:"1",c_id:a._id})));const s={a_id:"1",s_id:"10",r_g_id:"1",materials:e.value};b(s).then((a=>{t.value=a.data,p()}))},orderInformation:t,cartList:e,submit:()=>{const a={a_id:"1",s_id:"10",r_g_id:"1",materials:e.value};y(a).then((a=>{m({title:"创建订单成功",duration:2e3}),setTimeout((function(){g({url:"/pages/tabBar/order/order"})}),2e3)}))}}}}),[["render",function(a,t,s,m,p,g){var b;const y=h,L=j,k=I,M=v;return(null==(b=a.orderInformation)?void 0:b.address)?(e(),o(y,{key:0,class:"order-container"},{default:n((()=>[l(y,{class:"order-address"},{default:n((()=>[i("span",{class:"icon iconfont icon-dituguanli"}),l(y,null,{default:n((()=>[l(y,{class:"detail"},{default:n((()=>[c("成都市高新区名都路166号")])),_:1}),l(y,{class:"name"},{default:n((()=>[c(r(a.orderInformation.address.name)+" "+r(a.orderInformation.address.phone),1)])),_:1}),i("span",{class:"icon iconfont icon-right"})])),_:1})])),_:1}),l(y,{class:"commodityList"},{default:n((()=>[(e(!0),d(f,null,u(a.orderInformation.materialsMsg,((a,t)=>(e(),o(y,{class:"commodityItem"},{default:n((()=>[l(L,{src:a.img||"/static/logo.jpg"},null,8,["src"]),l(y,{class:"detail"},{default:n((()=>[l(y,{class:"name"},{default:n((()=>[c(r(a.o_m_name||"物料名称"),1)])),_:2},1024),l(y,{class:"unit"},{default:n((()=>[c("500g*30袋/箱")])),_:1}),l(y,{class:"price"},{default:n((()=>[l(k,{class:"total"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(" "+r(a.m_price||10),1)])),_:2},1024),l(y,{class:"numHandle"},{default:n((()=>[l(k,null,{default:n((()=>[c(r(a.o_m_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1}),l(y,{class:"other"},{default:n((()=>[l(y,{class:"other-item"},{default:n((()=>[l(k,{class:"left"},{default:n((()=>[c("优惠券")])),_:1}),l(y,{class:"right"},{default:n((()=>[l(k,{class:"color-primary"},{default:n((()=>[c(r(a.orderInformation.discount||0)+"张可使用",1)])),_:1}),i("span",{class:"icon iconfont icon-right"})])),_:1})])),_:1}),l(y,{class:"other-item"},{default:n((()=>[l(k,{class:"left"},{default:n((()=>[c("账户余额")])),_:1}),l(k,{class:"right"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(r(a.orderInformation.remain||0)+"元",1)])),_:1})])),_:1}),l(y,{class:"other-item"},{default:n((()=>[l(k,{class:"left"},{default:n((()=>[c("商品总额")])),_:1}),l(k,{class:"right"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(r(a.orderInformation.totalPrice||0)+"元",1)])),_:1})])),_:1}),l(y,{class:"other-item"},{default:n((()=>[l(k,{class:"left"},{default:n((()=>[c("运费")])),_:1}),l(k,{class:"right"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(r(a.orderInformation.freightCount||0)+"元",1)])),_:1})])),_:1}),l(y,{class:"other-item"},{default:n((()=>[l(k,{class:"left"},{default:n((()=>[c("活动优惠")])),_:1}),l(k,{class:"right"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(r(a.orderInformation.discount_money||0)+"元",1)])),_:1})])),_:1})])),_:1}),l(y,{class:"account"},{default:n((()=>[l(y,{class:"right"},{default:n((()=>[l(y,{class:"totalPrice"},{default:n((()=>[l(k,null,{default:n((()=>[c("合计：")])),_:1}),l(k,{class:"priceTotal"},{default:n((()=>[i("span",{class:"icon iconfont icon-jine"}),c(r(a.orderInformation.totalPrice),1)])),_:1})])),_:1}),l(M,{class:"uni-button",type:"primary",size:"mini",onClick:a.submit},{default:n((()=>[c("去结算")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):_("",!0)}],["__scopeId","data-v-24ecb31e"]]);export{L as default};
